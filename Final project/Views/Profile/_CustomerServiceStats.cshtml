@model dynamic

<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h6 class="mb-0">
            <i class="fas fa-headset me-2"></i>
            Customer Service Overview
        </h6>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="d-flex align-items-center mb-3">
                    <div class="bg-warning rounded-circle p-2 me-3">
                        <i class="fas fa-ticket-alt text-white"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Support Tickets</h6>
                        <small class="text-muted">
                            <span id="totalTickets">-</span> total,
                            <span id="openTickets">-</span> open
                        </small>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-center mb-3">
                    <div class="bg-success rounded-circle p-2 me-3">
                        <i class="fas fa-comments text-white"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Live Chat</h6>
                        <small class="text-muted">
                            <span id="activeChats">-</span> active sessions,
                            <span id="unreadMessages">-</span> unread
                        </small>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-3">
            <a href="/CustomerService/Index" class="btn btn-outline-primary btn-sm me-2">
                <i class="fas fa-ticket-alt me-1"></i> View Tickets
            </a>
            <a href="/CustomerService/Chats" class="btn btn-outline-success btn-sm me-2">
                <i class="fas fa-comments me-1"></i> Open Chat
            </a>
            <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createSupportTicketModal">
                <i class="fas fa-plus me-1"></i> New Ticket
            </button>
        </div>
    </div>
</div>

<!-- Create Support Ticket Modal -->
@await Html.PartialAsync("_CreateSupportTicketModal")

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load customer service statistics
        fetch('/Customer/Profile/GetCustomerServiceStats')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('totalTickets').textContent = data.stats.TotalTickets;
                    document.getElementById('openTickets').textContent = data.stats.OpenTickets;
                    document.getElementById('activeChats').textContent = data.stats.ActiveChatSessions;
                    document.getElementById('unreadMessages').textContent = data.stats.UnreadMessages;
                }
            })
            .catch(error => {
                console.error('Error loading customer service stats:', error);
            });
    });
</script> 