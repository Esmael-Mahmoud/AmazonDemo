
@{
    var currentPage = (int)Model.PageNumber;
    var totalPages = (int)Model.TotalPages;
    var pageSize = (int)Model.PageSize;
    var sizeOptions = new[] { 2, 5, 10, 20, 50 };
}

<nav class="d-flex justify-content-between align-items-center my-4">
    <div class="text-muted small">
        Showing page @currentPage of @totalPages
    </div>

    <ul class="pagination amazon-pagination mb-0">
        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
            <a class="page-link" href="?page=@(currentPage - 1)&size=@pageSize" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        @if (totalPages == 0)
        {
            <li class="page-item disabled">
                <a class="page-link">0</a>
            </li>
        }
        else
        {
            <!-- Always show first page -->
            <li class="page-item @(1 == currentPage ? "active" : "")">
                <a class="page-link" href="?page=1&size=@pageSize">1</a>
            </li>

            @if (currentPage > 3)
            {
                <li class="page-item disabled">
                    <span class="page-link">...</span>
                </li>
            }

            @for (int i = Math.Max(2, currentPage - 1); i <= Math.Min(totalPages - 1, currentPage + 1); i++)
            {
                <li class="page-item @(i == currentPage ? "active" : "")">
                    <a class="page-link" href="?page=@i&size=@pageSize">@i</a>
                </li>
            }

            @if (currentPage < totalPages - 2)
            {
                <li class="page-item disabled">
                    <span class="page-link">...</span>
                </li>
            }

            @if (totalPages > 1)
            {
                <li class="page-item @(totalPages == currentPage ? "active" : "")">
                    <a class="page-link" href="?page=@totalPages&size=@pageSize">@totalPages</a>
                </li>
            }
        }

        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
            <a class="page-link" href="?page=@(currentPage + 1)&size=@pageSize" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>
